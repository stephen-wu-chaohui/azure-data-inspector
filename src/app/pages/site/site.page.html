<ion-header>
  <ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button defaultHref="/home"></ion-back-button>
		</ion-buttons>
		<ion-title>Site</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
	<ion-card>
		<ion-card-header>
			<ion-card-title>
				<ion-text>
					<ion-input type="text" [(ngModel)]="site.name" (ionChange)="setLabelChanged()" color="labelChanged?'danger':'primary'" *ngIf="site">
					</ion-input>
				</ion-text>
			</ion-card-title>
			<ion-card-subtitle>
				<ion-text>
					<ion-input type="text" [(ngModel)]="site.description" (ionChange)="setLabelChanged()" color="labelChanged?'danger':'primary'" *ngIf="site">
					</ion-input>
				</ion-text>
			</ion-card-subtitle>
		</ion-card-header>
		<ion-fab vertical="center" horizontal="end" slot="fixed" *ngIf="selectionService.editMode">
			<ion-fab-button size="small" (click)="updateSite()" color="danger" [disabled]="!labelChanged">
				<ion-icon name="checkbox-outline"></ion-icon>
			</ion-fab-button>
		</ion-fab>
	</ion-card>

	<ion-item *ngFor="let sensor of sensors" (click)="configSensor(sensor)">
		<ion-grid>
			<ion-row>
				<ion-col size="9"><ion-label color="primary">{{sensor.name}}</ion-label></ion-col>
				<ion-col size="3" *ngIf="!selectionService.editMode"><ion-label class="value">{{currentValues[sensor.id]}}</ion-label></ion-col>
				<ion-col size="3" *ngIf="selectionService.editMode">
					<ion-button fill="clear" shape="round" (click)="removeSensor(sensor)"><ion-icon color="danger" name="close-circle"></ion-icon></ion-button>
				</ion-col>
			</ion-row>
		</ion-grid>
	</ion-item>
</ion-content>

<ion-fab vertical="bottom" horizontal="end" slot="fixed" *ngIf="selectionService.editMode">
	<ion-fab-button color="primary" (click)="addSensor()" color="Tertiary">
		<ion-icon name="add"></ion-icon>
	</ion-fab-button>
</ion-fab>
