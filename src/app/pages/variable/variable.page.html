<ion-header>
  <ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button defaultHref="/home"></ion-back-button>
		</ion-buttons>
		<ion-title>
			Sensor View
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
	<ion-card no-padding *ngIf="sensor">
		<ion-card-header>
			<ion-card-title>
				<ion-text>
					<ion-input type="text" [(ngModel)]="sensor.name" (ionChange)="setLabelChanged()" color="labelChanged?'danger':'primary'">
					</ion-input>
				</ion-text>
			</ion-card-title>
			<ion-card-subtitle>
				<ion-text>
					<ion-input type="text" [(ngModel)]="sensor.description" (ionChange)="setLabelChanged()" color="labelChanged?'danger':'primary'">
					</ion-input>
				</ion-text>
			</ion-card-subtitle>
		</ion-card-header>

		<ion-card-content *ngIf="sensor && selectionService.editMode">
			<ion-item-divider>
				<ion-checkbox (click)="toggleSettings()" checked="true"></ion-checkbox>
				<ion-label>Settings</ion-label>
			</ion-item-divider>
			<ion-item-group *ngIf="settings">
			<ion-item>
				<ion-label>Simulator Mode</ion-label>
					<ion-select text-right [interfaceOptions]="customPopoverOptions" interface="popover" [(ngModel)]="simulatorMode">
						<ion-select-option value="random">Random</ion-select-option>
						<ion-select-option value="sine">Sine</ion-select-option>
						<ion-select-option value="segment">Segment</ion-select-option>
					</ion-select>
				</ion-item>

				<ion-item>
					<ion-label>Interval(in seconds)</ion-label><ion-input class="value" text-right type="number" [(ngModel)]="interval"></ion-input>
				</ion-item>
				
				<ion-item>
					<ion-label>Value from:</ion-label><ion-input class="value" text-right type="number" [(ngModel)]="rangeMin"></ion-input>
				</ion-item>

				<ion-item>
					<ion-label>Value to:</ion-label><ion-input class="value" text-right type="number" [(ngModel)]="rangeMax"></ion-input>
				</ion-item>

				<ion-item lines="none">
					<ion-checkbox (click)="toggleSamples()" [(ngModel)]="enableSampling"></ion-checkbox>
					<ion-label>Sample (s)</ion-label><ion-input class="value" text-right type="number" [(ngModel)]="sampleInterval"></ion-input>
				</ion-item>

				<ion-item lines="none">
					<ion-checkbox (click)="toggleRunning()" [(ngModel)]="enableRunning" ></ion-checkbox>
					<ion-label>Run</ion-label>
					<ion-label text-right class="value">{{newValue | number: '2.2'}}</ion-label>
				</ion-item>
					
			</ion-item-group>

			<!-- <ion-grid>
				<ion-row>
					<ion-col size="6">
						<ion-checkbox (click)="toggleRunning()">Start</ion-checkbox>
					</ion-col>
					<ion-col size="6">
						<ion-label class="value">{{newValue | number: '2.2'}}</ion-label>
					</ion-col>
					<ion-button slot="end" shape="round" (click)="addSensorValue()">
						<ion-icon name="add"></ion-icon>
					</ion-button>
				</ion-row>
			</ion-grid> -->

		</ion-card-content>

		<ion-fab vertical="top" horizontal="end" slot="fixed">
			<ion-fab-button size="small" (click)="updateSensor()" color="danger" [disabled]="!labelChanged">
				<ion-icon name="checkbox-outline"></ion-icon>
			</ion-fab-button>
		</ion-fab>
	</ion-card>

	<ion-item *ngFor="let v of currentValues">
		<ion-grid>
			<ion-row>
				<ion-col class="time" size="8" color="primary">{{lastUpdatedOf(v) | date: 'yyyy-MM-dd HH:mm:ss'}}</ion-col>
				<ion-col class="value" size="4" color="primary">{{v.value | number: '2.2'}}</ion-col>
			</ion-row>
		</ion-grid>
	</ion-item>
</ion-content>
